<div class="page-title">
  <h1><%= @toy.name %></h1>
</div>

<div class="toy-details-layout">
  <div class="toy-column">
    <div class="toy-image-wrapper">
      <% if @toy.photo.attached? %>
        <%= image_tag @toy.photo, class: "toy-image", alt: @toy.name %>
      <% end %>
    </div>

    <div class="toy-info">
      <h1 class="toy-title"></h1>
      <p><strong>Category:</strong> <%= @toy.category %></p>
      <p><strong>Description:</strong> <%= @toy.description %></p>
      <p><strong>Condition:</strong> <%= @toy.condition %></p>
      <p><strong>Location:</strong> <%= @toy.location %></p>
    </div>

    <div class="trade-request-container">
      <%= simple_form_for [@toy, @trade] do |f| %>
        <%= f.association :seeker_toy, collection: current_user.toys, label: "Select Your Toy to Trade"%>
        <%= f.submit "Request to Trade", class: "btn btn-primary px-4" %>
      <% end %>
    </div>
  </div>

  <div class="map-column">
    <div class="map-container">
      <div
        data-controller="map"
        data-map-api-key-value="<%= ENV['MAPBOX_API_KEY'] %>"
        data-map-markers-value="<%= @markers.to_json %>"
        class="map"
      ></div>
    </div>

    <div class="owner-links">
      <%= link_to user_path(@toy.user), class: "owner-link" do %>
        <div class="owner-button">
          <h3>Check out this user:  <%= @toy.user.username %></h3>
        </div>
      <% end %>

      <%= link_to toys_path(category: @toy.category), class: "category-link" do %>
        <div class="category-button">
          <h3><%= @toy.user.username %> is looking for toys in the <%= @toy.category %> category</h3>
        </div>
      <% end %>
    </div>
  </div>
</div>
